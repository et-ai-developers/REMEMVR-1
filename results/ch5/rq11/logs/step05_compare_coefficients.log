[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 9 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 9 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 3 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/3 coefficients
[INFO] CTT significant: 2/3 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 3/3 = 100.0%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 1.000
[KAPPA] Interpretation: Almost perfect agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] No interaction terms found
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: 0.486
[RATIO] Median ratio: 0.232
[RATIO] Range: [0.126, 1.098]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 1/3 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_coefficient_comparison.csv (3 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 100.000 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 1.000 (threshold: 0.60)
  [FAIL] kappa_interactions_only: nan (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[ERROR] Coefficient comparison validation failed: DataFrame structure validation failed: Expected 8-12 rows, found 3
[TRACEBACK] Full error details:
Traceback (most recent call last):
  File "/home/etai/projects/REMEMVR/results/ch5/rq11/code/step05_compare_coefficients.py", line 518, in <module>
    raise ValueError(f"Coefficient comparison validation failed: {coef_validation['message']}")
ValueError: Coefficient comparison validation failed: DataFrame structure validation failed: Expected 8-12 rows, found 3
[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 9 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 9 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 3 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/3 coefficients
[INFO] CTT significant: 2/3 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 3/3 = 100.0%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 1.000
[KAPPA] Interpretation: Almost perfect agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] No interaction terms found
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: 0.486
[RATIO] Median ratio: 0.232
[RATIO] Range: [0.126, 1.098]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 1/3 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_coefficient_comparison.csv (3 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 100.000 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 1.000 (threshold: 0.60)
  [FAIL] kappa_interactions_only: nan (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[VALIDATION] Coefficient comparison: DataFrame structure valid: 3 rows, 12 columns (required: 12).
[VALIDATION] Validating agreement metrics structure...
[VALIDATION] Agreement metrics: DataFrame structure valid: 3 rows, 4 columns (required: 4).
[VALIDATION] Checking for NaN values...
[VALIDATION] No NaN values in p-values or estimates
[VALIDATION] Checking Cohen's kappa range...
[VALIDATION] Cohen's kappa in valid range [-1, 1]
[SUCCESS] Step 5 complete
[SUMMARY] Key findings:
  - Compared 3 coefficients across IRT and CTT models
  - Raw agreement: 100.0%
  - Cohen's kappa: 1.000 (Almost perfect agreement)
  - Flagged 1 large discrepancies
