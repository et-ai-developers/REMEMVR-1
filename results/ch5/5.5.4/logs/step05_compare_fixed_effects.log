[START] Step 5: Compare Fixed Effects between IRT and CTT Models
[LOAD] Loading IRT-based LMM model...
[LOADED] IRT model: /home/etai/projects/REMEMVR/results/ch5/5.5.4/data/step03_irt_lmm_model.pkl (converged=True)
[LOAD] Loading CTT-based LMM model...
[LOADED] CTT model: /home/etai/projects/REMEMVR/results/ch5/5.5.4/data/step03_ctt_lmm_model.pkl (converged=True)
[EXTRACT] Extracting fixed effects from IRT model...
[EXTRACT] Extracting fixed effects from CTT model...
[EXTRACT] Fixed effects structure validated: 7 terms
[EXTRACT] Terms: ['Intercept', "C(location_type, Treatment('source'))[T.destination]", 'log_TSVR', "C(location_type, Treatment('source'))[T.destination]:log_TSVR", 'Group Var', 'Group x log_TSVR Cov', 'log_TSVR Var']
[BONFERRONI] Applying Bonferroni correction (factor=7)...
[BONFERRONI] Correction applied to both models
[CLASSIFY] Classifying effect agreements...
[CLASSIFY] Sign matches: 7/7
[CLASSIFY] Significance matches: 4/7
[CLASSIFY] Overall agreements: 4/7 (57.1%)
[BUILD] Creating coefficient comparison table...
[SAVED] step05_coefficient_comparison.csv (7 rows, 12 cols)
[KAPPA] Computing Cohen's kappa for agreement classification...
[KAPPA] Cohen's kappa = 0.160 (Slight agreement)
[BUILD] Creating agreement metrics summary...
[SAVED] step05_agreement_metrics.csv (1 rows, 6 cols)
[VALIDATION] Validating Cohen's kappa bounds...
[VALIDATION] Kappa bounds valid: All 1 ICC values within valid bounds [0,1] (range: 0.160 to 0.160).
[VALIDATION] Agreement percentage valid: 57.1% in [0, 100]
[ERROR] 'numpy.bool' object is not iterable
[TRACEBACK] Full error details:
Traceback (most recent call last):
  File "/home/etai/projects/REMEMVR/results/ch5/5.5.4/code/step05_compare_fixed_effects.py", line 346, in <module>
    bonferroni_valid = all(
                       ^^^^
TypeError: 'numpy.bool' object is not iterable
[START] Step 5: Compare Fixed Effects between IRT and CTT Models
[LOAD] Loading IRT fixed effects from CSV...
[LOADED] IRT coefficients: step03_irt_coefficients.csv (4 rows)
[LOAD] Loading CTT fixed effects from CSV...
[LOADED] CTT coefficients: step03_ctt_coefficients.csv (4 rows)
[EXTRACT] Extracting fixed effects from IRT model...
[EXTRACT] Extracting fixed effects from CTT model...
[EXTRACT] Fixed effects structure validated: 4 terms
[EXTRACT] Terms: ['Intercept', "C(location_type, Treatment('source'))[T.destination]", 'log_TSVR', "C(location_type, Treatment('source'))[T.destination]:log_TSVR"]
[BONFERRONI] Applying Bonferroni correction (factor=4)...
[BONFERRONI] Correction applied to both models
[CLASSIFY] Classifying effect agreements...
[CLASSIFY] Sign matches: 4/4
[CLASSIFY] Significance matches: 2/4
[CLASSIFY] Overall agreements: 2/4 (50.0%)
[BUILD] Creating coefficient comparison table...
[SAVED] step05_coefficient_comparison.csv (4 rows, 12 cols)
[KAPPA] Computing Cohen's kappa for agreement classification...
[KAPPA] Cohen's kappa = 0.000 (Slight agreement)
[BUILD] Creating agreement metrics summary...
[SAVED] step05_agreement_metrics.csv (1 rows, 6 cols)
[VALIDATION] Validating Cohen's kappa bounds...
[VALIDATION] Kappa bounds valid: All 1 ICC values within valid bounds [0,1] (range: 0.000 to 0.000).
[VALIDATION] Agreement percentage valid: 50.0% in [0, 100]
[VALIDATION] Bonferroni correction valid: p_bonferroni >= p_uncorrected for all terms
[SUMMARY] Fixed effects comparison complete:
  - Coefficient comparison: step05_coefficient_comparison.csv
  - Agreement metrics: step05_agreement_metrics.csv
  - Cohen's kappa: 0.000 (Slight agreement)
  - Overall agreement: 50.0% (2/4 terms)
  - Kappa threshold (>0.60): NOT MET
  - Agreement threshold (>=80%): NOT MET
[SUCCESS] Step 5 complete
