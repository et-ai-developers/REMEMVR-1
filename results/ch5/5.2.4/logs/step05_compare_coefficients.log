[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 9 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 9 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 3 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/3 coefficients
[INFO] CTT significant: 2/3 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 3/3 = 100.0%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 1.000
[KAPPA] Interpretation: Almost perfect agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] No interaction terms found
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: 0.486
[RATIO] Median ratio: 0.232
[RATIO] Range: [0.126, 1.098]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 1/3 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_coefficient_comparison.csv (3 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 100.000 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 1.000 (threshold: 0.60)
  [FAIL] kappa_interactions_only: nan (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[ERROR] Coefficient comparison validation failed: DataFrame structure validation failed: Expected 8-12 rows, found 3
[TRACEBACK] Full error details:
Traceback (most recent call last):
  File "/home/etai/projects/REMEMVR/results/ch5/rq11/code/step05_compare_coefficients.py", line 518, in <module>
    raise ValueError(f"Coefficient comparison validation failed: {coef_validation['message']}")
ValueError: Coefficient comparison validation failed: DataFrame structure validation failed: Expected 8-12 rows, found 3
[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 9 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 9 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 3 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/3 coefficients
[INFO] CTT significant: 2/3 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 3/3 = 100.0%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 1.000
[KAPPA] Interpretation: Almost perfect agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] No interaction terms found
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: 0.486
[RATIO] Median ratio: 0.232
[RATIO] Range: [0.126, 1.098]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 1/3 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_coefficient_comparison.csv (3 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 100.000 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 1.000 (threshold: 0.60)
  [FAIL] kappa_interactions_only: nan (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[VALIDATION] Coefficient comparison: DataFrame structure valid: 3 rows, 12 columns (required: 12).
[VALIDATION] Validating agreement metrics structure...
[VALIDATION] Agreement metrics: DataFrame structure valid: 3 rows, 4 columns (required: 4).
[VALIDATION] Checking for NaN values...
[VALIDATION] No NaN values in p-values or estimates
[VALIDATION] Checking Cohen's kappa range...
[VALIDATION] Cohen's kappa in valid range [-1, 1]
[SUCCESS] Step 5 complete
[SUMMARY] Key findings:
  - Compared 3 coefficients across IRT and CTT models
  - Raw agreement: 100.0%
  - Cohen's kappa: 1.000 (Almost perfect agreement)
  - Flagged 1 large discrepancies
[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 9 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 9 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[STANDARDIZE] Fixing domain case mismatch in term names...
[STANDARDIZE] IRT terms: ['Intercept', 'C(domain)[T.When]', 'C(domain)[T.Where]', 'TSVR_hours', 'TSVR_hours:C(domain)[T.When]', 'TSVR_hours:C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.When]', 'log_TSVR:C(domain)[T.Where]']
[STANDARDIZE] CTT terms: ['Intercept', 'C(domain)[T.When]', 'C(domain)[T.Where]', 'TSVR_hours', 'TSVR_hours:C(domain)[T.When]', 'TSVR_hours:C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.When]', 'log_TSVR:C(domain)[T.Where]']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 9 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 4/9 coefficients
[INFO] CTT significant: 5/9 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 8/9 = 88.9%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 0.780
[KAPPA] Interpretation: Substantial agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] Interaction terms: kappa = 1.000 (n=4)
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: -0.286
[RATIO] Median ratio: 0.126
[RATIO] Range: [-5.464, 1.461]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 1/9 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_coefficient_comparison.csv (9 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 88.889 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 0.780 (threshold: 0.60)
  [PASS] kappa_interactions_only: 1.000 (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq11/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[VALIDATION] Coefficient comparison: DataFrame structure valid: 9 rows, 12 columns (required: 12).
[VALIDATION] Validating agreement metrics structure...
[VALIDATION] Agreement metrics: DataFrame structure valid: 3 rows, 4 columns (required: 4).
[VALIDATION] Checking for NaN values...
[VALIDATION] No NaN values in p-values or estimates
[VALIDATION] Checking Cohen's kappa range...
[VALIDATION] Cohen's kappa in valid range [-1, 1]
[SUCCESS] Step 5 complete
[SUMMARY] Key findings:
  - Compared 9 coefficients across IRT and CTT models
  - Raw agreement: 88.9%
  - Cohen's kappa: 0.780 (Substantial agreement)
  - Flagged 1 large discrepancies
[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 6 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 6 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[STANDARDIZE] Fixing domain case mismatch in term names...
[STANDARDIZE] IRT terms: ['Intercept', 'C(domain)[T.Where]', 'TSVR_hours', 'TSVR_hours:C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.Where]']
[STANDARDIZE] CTT terms: ['Intercept', 'C(domain)[T.Where]', 'TSVR_hours', 'TSVR_hours:C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.Where]']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 6 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/6 coefficients
[INFO] CTT significant: 3/6 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 5/6 = 83.3%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 0.667
[KAPPA] Interpretation: Substantial agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] Interaction terms: kappa = 0.000 (n=2)
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: -0.684
[RATIO] Median ratio: 0.120
[RATIO] Range: [-5.464, 1.100]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 2/6 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['C(domain)[T.Where]', 'log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/5.2.4/results/step05_coefficient_comparison.csv (6 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [PASS] raw_agreement_pct: 83.333 (threshold: 80.00)
  [PASS] kappa_all_coefficients: 0.667 (threshold: 0.60)
  [FAIL] kappa_interactions_only: 0.000 (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/5.2.4/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[VALIDATION] Coefficient comparison: DataFrame structure valid: 6 rows, 12 columns (required: 12).
[VALIDATION] Validating agreement metrics structure...
[VALIDATION] Agreement metrics: DataFrame structure valid: 3 rows, 4 columns (required: 4).
[VALIDATION] Checking for NaN values...
[VALIDATION] No NaN values in p-values or estimates
[VALIDATION] Checking Cohen's kappa range...
[VALIDATION] Cohen's kappa in valid range [-1, 1]
[SUCCESS] Step 5 complete
[SUMMARY] Key findings:
  - Compared 6 coefficients across IRT and CTT models
  - Raw agreement: 83.3%
  - Cohen's kappa: 0.667 (Substantial agreement)
  - Flagged 2 large discrepancies
[START] Step 5: Compare Fixed Effects Between IRT and CTT Models
[LOAD] Loading IRT fixed effects...
[LOADED] IRT fixed effects: 4 rows, 5 columns
[INFO] IRT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[LOAD] Loading CTT fixed effects...
[LOADED] CTT fixed effects: 4 rows, 5 columns
[INFO] CTT columns: ['term', 'estimate', 'SE', 'z', 'p_uncorrected']
[STANDARDIZE] Fixing domain case mismatch in term names...
[STANDARDIZE] IRT terms: ['Intercept', 'C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.Where]']
[STANDARDIZE] CTT terms: ['Intercept', 'C(domain)[T.Where]', 'log_TSVR', 'log_TSVR:C(domain)[T.Where]']
[MERGE] Merging IRT and CTT fixed effects on term...
[MERGED] 4 coefficients present in both models
[CLASSIFY] Classifying significance (alpha = 0.05)...
[INFO] IRT significant: 2/4 coefficients
[INFO] CTT significant: 3/4 coefficients
[AGREEMENT] Computing agreement classification...
[AGREEMENT] Raw agreement: 3/4 = 75.0%
[KAPPA] Computing Cohen's kappa (all coefficients)...
[KAPPA] All coefficients: kappa = 0.500
[KAPPA] Interpretation: Moderate agreement
[KAPPA] Computing Cohen's kappa (interaction terms only)...
[KAPPA] Interaction terms: kappa = 0.000 (n=1)
[RATIO] Computing beta ratios (CTT / IRT)...
[RATIO] Mean ratio: -0.049
[RATIO] Median ratio: 0.595
[RATIO] Range: [-2.469, 1.083]
[DISCREPANCY] Flagging large coefficient discrepancies...
[DISCREPANCY] 2/4 coefficients flagged (|diff| > 2.0*SE)
[DISCREPANCY] Flagged terms: ['C(domain)[T.Where]', 'log_TSVR']
[RENAME] Preparing output columns...
[SAVE] Saving coefficient comparison table...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/5.2.4/results/step05_coefficient_comparison.csv (4 rows, 12 columns)
[SUMMARY] Creating agreement metrics summary...
[SUMMARY] Agreement metrics:
  [FAIL] raw_agreement_pct: 75.000 (threshold: 80.00)
  [FAIL] kappa_all_coefficients: 0.500 (threshold: 0.60)
  [FAIL] kappa_interactions_only: 0.000 (threshold: 0.60)
[SAVE] Saving agreement metrics...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/5.2.4/results/step05_agreement_metrics.csv (3 rows, 4 columns)
[VALIDATION] Validating coefficient comparison structure...
[VALIDATION] Coefficient comparison: DataFrame structure valid: 4 rows, 12 columns (required: 12).
[VALIDATION] Validating agreement metrics structure...
[VALIDATION] Agreement metrics: DataFrame structure valid: 3 rows, 4 columns (required: 4).
[VALIDATION] Checking for NaN values...
[VALIDATION] No NaN values in p-values or estimates
[VALIDATION] Checking Cohen's kappa range...
[VALIDATION] Cohen's kappa in valid range [-1, 1]
[SUCCESS] Step 5 complete
[SUMMARY] Key findings:
  - Compared 4 coefficients across IRT and CTT models
  - Raw agreement: 75.0%
  - Cohen's kappa: 0.500 (Moderate agreement)
  - Flagged 2 large discrepancies
