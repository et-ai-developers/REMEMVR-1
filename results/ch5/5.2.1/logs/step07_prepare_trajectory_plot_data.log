[START] Step 07: Prepare Trajectory Plot Data (Decision D069)
============================================================

[LOAD] Loading input data...
[LOADED] step04_lmm_input.csv (1200 rows)
[LOADED] step03_item_parameters.csv (69 items)
[MAPPED] Test values mapped: {1,2,3,4} -> {0,1,3,6}

[COMPUTE] Computing domain-specific IRT parameters...
  Using columns: factor=factor, disc=a, diff=b
[DONE] Domain parameters computed:
  what: a=1.043, b=-1.244
  when: a=1.650, b=1.378
  where: a=0.832, b=0.091

[FIT] Fitting LMM model for predictions...
  Model fitted: AIC = 2523.36

[PREDICT] Generating predictions for each observation...
[DONE] Predictions generated for 1200 observations

[PREPARE] Creating theta scale plot data (individual-level)...
[DONE] Theta plot data prepared: 1200 rows
  Domains: ['what', 'when', 'where']
  TSVR range: 1.0 - 246.2 hours

[CONVERT] Transforming to probability scale (Decision D069)...
[DONE] Probability conversion complete
  Probability range: 0.023 - 0.981

[SAVE] Saving plot data files...
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq1/plots/step07_trajectory_theta_data.csv
  Rows: 1200, Columns: ['TSVR_hours', 'domain', 'theta', 'predicted_theta', 'UID']
[SAVED] /home/etai/projects/REMEMVR/results/ch5/rq1/plots/step07_trajectory_probability_data.csv
  Rows: 1200, Columns: ['TSVR_hours', 'domain', 'probability', 'predicted_probability', 'UID']

[VALIDATION] Running validation checks...
  [PASS] Both output files exist
  [PASS] Individual-level data: 1200 rows
  [PASS] All 3 domains present
  [PASS] TSVR range valid: 1.0 - 246.2 hours
  [PASS] No NaN values in critical columns
  [PASS] Probability values in [0, 1] range
  [PASS] Prediction columns present

[PASS] All validation checks passed

============================================================
[SUCCESS] Step 07 complete: Trajectory plot data prepared
============================================================

Outputs created:
  1. /home/etai/projects/REMEMVR/results/ch5/rq1/plots/step07_trajectory_theta_data.csv
  2. /home/etai/projects/REMEMVR/results/ch5/rq1/plots/step07_trajectory_probability_data.csv

Decision D069 implemented: Dual-scale trajectory data
  - Theta scale: IRT ability units for technical audience
  - Probability scale: 0-1 range for general audience

Continuous TSVR: Individual-level data preserves real time variability
  - 1200 individual observations
  - TSVR range: 1.0 - 246.2 hours

[SUMMARY] Theta by domain:
  what: n=400, theta mean=-0.007, std=0.899
  when: n=400, theta mean=0.109, std=0.688
  where: n=400, theta mean=0.037, std=0.932
